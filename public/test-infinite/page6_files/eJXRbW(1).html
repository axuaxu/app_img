<!DOCTYPE html>
<!-- saved from url=(0076)https://s.codepen.io/desandro/fullembedgrid/eJXRbW?type=embed&animations=run -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <link rel="shortcut icon" type="image/x-icon" href="https://production-assets.codepen.io/assets/favicon/favicon-8ea04875e70c4b0bb41da869e81236e54394d63638a1ef12fa558a4a835f1164.ico">
  <link rel="mask-icon" type="" href="https://production-assets.codepen.io/assets/favicon/logo-pin-f2d2b6d2c61838f7e76325261b7195c27224080bc099486ddd6dccb469b8e8e6.svg" color="#111">
  <title>CodePen - Packery v2 puzzle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  
  
      <style>
      * { box-sizing: border-box; }

/* force scroll bar */
html { overflow-y: scroll; }

body {
  font-family: sans-serif;
  background: #DDD;
  color: #555;
  text-align: center;
  padding-bottom: 50px;
}

a { color: #19F; }

a:hover { color: #C25; }


.grid {
  width: 400px;
  background: #333;
  margin: 50px auto;
  min-height: 500px;
  z-index: 2;
}

.tile {
  float: left;
  width: 100px;
  height: 100px;
/*   border: 1px solid; */
  background-color: white;
  background-image: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/82/metafizzy-logo-400.png');
  cursor: move;
}

.tile.w2 { width: 200px; }
.tile.h2 { height: 200px; }

.tile.bgx1 { background-position-x: -100px; }
.tile.bgx2 { background-position-x: -200px; }
.tile.bgx3 { background-position-x: -300px; }

.tile.bgy1 { background-position-y: -100px; }
.tile.bgy2 { background-position-y: -200px; }
.tile.bgy3 { background-position-y: -300px; }
.tile.bgy4 { background-position-y: -400px; }

.tile:hover {
  outline: 5px solid hsla(210, 100%, 50%, 0.7);
  outline-offset: -5px;
  z-index: 2;
}

.tile.is-dragging,
.tile.is-positioning-post-drag {
  outline: none;
  z-index: 2;
  opacity: 0.8;
}

.packery-drop-placeholder {
  outline: 3px dashed white;
  outline-offset: -6px;
  -webkit-transition: -webkit-transform 0.2s;
  transition: -webkit-transform 0.2s;
  transition: transform 0.2s;
  transition: transform 0.2s, -webkit-transform 0.2s;
}

/* -------- */

.dialog-container {
  width: 600px;
  margin: 0 auto;
  position: relative;
}

.dialog {
  position: absolute;
  padding: 20px;
  width: 100%;
  background: #333;
  color: white;
  border-radius: 20px;
  text-align: center;
  font-size: 28px;
  box-shadow: 0 5px 10px hsla(0, 0%, 0%, 0.4);
  z-index: 10;
  -webkit-transition: opacity 0.2s, -webkit-transform 0.2s;
  transition: opacity 0.2s, -webkit-transform 0.2s;
  transition: opacity 0.2s, transform 0.2s;
  transition: opacity 0.2s, transform 0.2s, -webkit-transform 0.2s;
}

.dialog.is-waiting {
  pointer-events: none;
  opacity: 0;
  -webkit-transform: translateY(100px);
          transform: translateY(100px);
}


.dialog b {
  color: #EA0;
}

.button {
  font-size: 20px;
  background-color: #19F;
  background-image: -webkit-linear-gradient( hsla(0, 0%, 0%, 0), hsla(0, 0%, 0%, 0.2) );
  background-image: linear-gradient( hsla(0, 0%, 0%, 0), hsla(0, 0%, 0%, 0.2) );
  border: none;
  color: white;
  padding: 10px 20px;
  border-radius: 5px;
}

.button:hover {
  cursor: pointer;
  background-color: #3AF;
}

.button:active {
  background-color: #C25;
  box-shadow: inset 0 2px 10px hsla(0, 0%, 0%, 0.5);
}

    </style>

  <script>
  window.console = window.console || function(t) {};
</script>

  
  
  <script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>

</head>

<body translate="no">

  <h2><a href="https://packery.metafizzy.co/">Packery v2</a></h2>

<div class="dialog-container">
  <div class="dialog is-waiting">
    <p class="dialog__text">&nbsp;</p>
    <div>
    <button class="button try-again-button">Try again</button>
    <button class="button close-dialog-button">Close</button>
    </div>
  </div>
</div>

<div class="grid" style="position: relative; height: 500px;">
  <div data-tile="a" class="tile h2 bgx3 bgy1" style="position: absolute; left: 0px; top: 0px;"></div>
  <div data-tile="b" class="tile bgx2 bgy1" style="position: absolute; left: 100px; top: 0px;"></div>
  <div data-tile="c" class="tile bgx1 bgy4" style="position: absolute; left: 200px; top: 0px;"></div>
  <div data-tile="d" class="tile bgx1 bgy1" style="position: absolute; left: 300px; top: 0px;"></div>
  <div data-tile="e" class="tile w2 bgx2 bgy4" style="position: absolute; left: 100px; top: 100px;"></div>
  <div data-tile="f" class="tile h2" style="position: absolute; left: 300px; top: 100px;"></div>
  <div data-tile="g" class="tile bgx3" style="position: absolute; left: 0px; top: 200px;"></div>
  <div data-tile="h" class="tile bgx3 bgy3" style="position: absolute; left: 100px; top: 200px;"></div>
  <div data-tile="i" class="tile bgx1 bgy3" style="position: absolute; left: 200px; top: 200px;"></div>
  <div data-tile="j" class="tile h2 bgy3" style="position: absolute; left: 0px; top: 300px;"></div>
  <div data-tile="k" class="tile h2 bgx2 bgy2" style="position: absolute; left: 100px; top: 300px;"></div>
  <div data-tile="l" class="tile w2 bgy2" style="position: absolute; left: 200px; top: 300px;"></div>
  <div data-tile="m" class="tile w2 bgx1" style="position: absolute; left: 200px; top: 400px;"></div>
</div>

<div>
  <button class="button shuffle-button">Shuffle</button>
</div>
    <script src="./stopExecutionOnTimeout-b2a7b3fe212eaa732349046d8416e00a9dec26eb7fd347590fbced3ab38af52e.js.download"></script>

  <script src="./packery.pkgd.js.download"></script>
<script src="./draggabilly.pkgd.js.download"></script>

    <script>
    var grid = document.querySelector('.grid');
var pckry = new Packery( grid, {
  itemSelector: '.tile',
  columnWidth: 100,
  transitionDuration: '0.3s'
});

pckry.getItemElements().forEach( function( itemElem ) {
  var draggie = new Draggabilly( itemElem );
  pckry.bindDraggabillyEvents( draggie );
});

// map items by their data-tile
var mappedItems = {};

pckry.items.forEach( function( item ) {
  var attr = item.element.getAttribute('data-tile');
  mappedItems[ attr ] = item;
});

( function() {

var orders = [
  'abcdefghijklm',
  'ecdibmhfajkgl',
  'ilckfgdebhjam'
];
var d = Object.keys( Packery.defaults ).sort( function( a, b ) {
  return b < a ? 1 : -1;
});
var i=3,j=9,o=Packery.namespace;
var orderIndex = 0;

function shuffleTiles() {
  // shuffle items
  orderIndex++;
  var order = orders[ orderIndex % 3 ];
  pckry.items = order.split('').map( function( attr ) {
    return mappedItems[ attr ];
  });
  // stagger transition
  pckry._resetLayout();
  pckry.items.forEach( function( item, i ) {
    setTimeout( function() {
      pckry.layoutItems( [ item ] );  
    }, i * 34 );
  });
}

var dialog = document.querySelector('.dialog');
var didWin = false;

function win() {
  if ( !didWin ) {
    document.querySelector('.dialog__text').innerHTML = 'Nice work!<br>';
  }
  didWin = true;
  showDialog();
}


function showDialog() {
  dialog.classList.remove('is-waiting');
}

function hideDialog() {
  dialog.classList.add('is-waiting');
}

dialog.querySelector('.try-again-button').onclick = function() {
  hideDialog();
  shuffleTiles();
}

dialog.querySelector('.close-dialog-button').onclick = hideDialog;

document.querySelector('.shuffle-button').onclick = shuffleTiles;

pckry.on( 'dragItemPositioned', function() {
  var order = pckry.items.map( function( item ) {
    return item.element.getAttribute('data-tile');
  }).join('');
  if ( pckry.maxY == 500 && order == 'fmgdbalkjihce' ) {
    win();
  }
});

})();
  //# sourceURL=pen.js
  </script>

  
  



 </body></html>